(()=>{"use strict";const e=class{#e={};on(e,t){return this.#e[e]?this.#e[e].push(t):this.#e[e]=[t],this}off(e,t){if(!this.#e[e])return this;if("function"==typeof t){const s=this.#e[e].indexOf(t);if(-1===s)return this;this.#e[e].splice(s,1)}else this.#e[e]=[];return this}dispatch(e,t,s){return this.#e[e]&&this.#e[e].forEach((function(e){e.call(this,t)})),this}emit(e,t){return this.dispatch(e,t)}#t={};css(e,t,s){if(!this.#t[e]||s){this.#t[e]=!0;const s=document.createElement("style");s.appendChild(document.createTextNode(t)),document.head.appendChild(s)}}};window.mw=new class extends e{#s={};#i(e,t,s){e&&t&&t[e]&&(e=t[e]).call(t,s)}call(e,t){for(let s in this.#s)this.#s[s][e]&&this.#i(e,this.#s[s],t)}get(e){return this.#s[e]}getModules(){return this.#s}register(e,t){let s;s="function"==typeof t?new t:t,this.#s[e]=s,this[e]=s,this.#i("onRegister",s),this.dispatch("register")}remove(e){let t;if("string"==typeof e&&(t=e,e=this.get(e)),!t)for(let s in this.#s)if(this.#s[s]===e){t=s;break}delete this.#s[t],delete this[t],this.#i("onDestroy",e),this.dispatch("remove")}}})();